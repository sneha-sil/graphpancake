# graphpancake configuration template for batch processing
# 
# Copy this file and customize the paths for your data structure.
# Save as config.yaml and use with: python batch_processing_script.py

data_paths:
  # Option 1: Individual directories (set archive_file to null if using this option)
  base_dir: null # "/path/to/your/molecular/data"
  xyz_dir: null # "/path/to/your/molecular/data/xyz_files"
  shermo_dir: null # "/path/to/your/molecular/data/shermo_outputs"
  janpa_dir: null # "/path/to/your/molecular/data/janpa_outputs"
  nbo_dir: null # "/path/to/your/molecular/data/nbo_outputs"

  # Option 2: Compressed archive containing all data (set directories to null if using this)
  archive_file:  # "/path/to/your/data.tar.gz"

file_patterns:
  # Matching files to your molecular identifier, customize each pattern as necessary
  # Use {mol_id} as placeholder for the molecule identifier
  xyz_pattern: "{mol_id}.xyz"                    # e.g., mol_001.xyz
  shermo_pattern: "{mol_id}_shermo.out"          # e.g., mol_001_shermo.out
  janpa_pattern: "{mol_id}_janpa.out"            # e.g., mol_001_janpa.out
  nbo_pattern: "{mol_id}_nbo.out"                # e.g., mol_001_nbo.out

# CSV file containing molecular identifiers, SMILES strings, and miscellaneous properties
data_file: "/path/to/your/data.csv"

labels_file: "/path/to/your/labels.csv"  # CSV file with labels corresponding to rows in the data csv file (can be the same as the data_file)

labels_config:
  # Column names in your labels CSV file
  id_column: "mol_id"        # Column containing unique molecule identifiers, taken from data csv
  smiles_column: "smiles"    # Column containing SMILES strings, taken from data csv
  labels_column: "labels"     # Column containing target property for regression/classification, taken from labels csv

settings:
  # comment out any graph types you do not have data for
  graph_types: 
    - "DFT"     # Data mainly from DFT calcs. (.xyz & Shermo)
    - "NPA"     # Natural Population Analysis (+ JANPA)
    - "NBO"     # Natural Bond Orbital analysis (+ NBO)
    - "QM"      # Combined DFT, NPA & NBO analysis
  
  # Performance settings
  batch_size: 1000           # Number of molecules per processing chunk
  max_workers: 16            # Number of parallel processing threads
  
  # Chemical parameters
  bond_threshold: 0.4       # Minimum Wiberg bond order for edge creation
  max_distance: 3.0         # Maximum atomic distance (in Angstroms, Ã…) for edge creation

memory:
  clear_cache_frequency: 1000        # Clear file cache every N molecules
  max_memory_usage_gb: 16.0          # Approximate memory limit (GB)

cleanup:
  remove_temp_files: true            # Remove temporary extraction directory after processing

output:
  database_name: "molecular_graphs"    # Output database file name, will have .db extension
  overwrite_existing: false               # Whether to overwrite existing database
  export_ml_features: true                # Export a csv file of ML features
  ml_export_dir: "/path/to/ml_export_dir"                # Directory for ML feature exports

error_handling:
  continue_on_error: true           # Continue processing if some molecules fail
  save_error_log: true              # Save failed molecules to JSON file
  max_errors: 1000                  # Stop processing after this many errors
  
logging:
  level: "INFO"                     # DEBUG, INFO, WARNING, ERROR
  save_to_file: true                # Save logs to file
  log_file: "batch_processing.log"  # Log file name